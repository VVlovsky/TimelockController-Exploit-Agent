class Web3Mock:
    def __init__(self, roles_by_account):
        self.eth = EthMock(roles_by_account)


class EthMock:
    def __init__(self, roles_by_account):
        self.contract = ContractMock(roles_by_account)


class ContractMock:
    def __init__(self, roles_by_account):
        self.functions = FunctionsMock(roles_by_account)

    def __call__(self, address, *args, **kwargs):
        return self


class FunctionsMock:
    def __init__(self, roles_by_account):
        self.roles_by_account = roles_by_account
        self.return_value = None

    def hasRole(self, role, account):
        roles = self.roles_by_account.get(account, [])
        self.return_value = role in roles
        return self

    def call(self, *_, **__):
        return self.return_value
